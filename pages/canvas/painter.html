<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      #canvas {
        display: block;
        margin: 30px auto;
      }
    </style>
  </head>
  <body onload="draw()">
    <canvas width="600" height="450" id="canvas"></canvas>
    <button onclick="donwload()">下载</button>
    <script>
      let dlink = null
      function draw() {
        var ctx = document
          .getElementById('canvas')
          .getContext('2d')
        ctx.fillStyle = '#165c61'
        ctx.fillRect(0, 0, 600, 450)
        ctx.fillStyle = '#FFA500'
        ctx.font = 'bold 80px serif'
        ctx.textAlign = 'center'
        ctx.fillText('Webpack', 300, 225)
        const imgUrl = document
          .getElementById('canvas')
          .toDataURL('image/png')
        dlink = document.createElement('a')
        dlink.download = 'donwload'
        dlink.href = imgUrl
        dlink.dataset.downloadurl = [
          'image/png',
          dlink.donwload,
          dlink.href,
        ].join('.')
        // dlink.click()
      }
      function donwload() {
        if (dlink) {
          dlink.click()
        }
      }
    </script>
  </body>
</html>
